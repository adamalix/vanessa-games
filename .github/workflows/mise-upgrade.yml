name: Weekly Mise Upgrade

on:
  schedule:
    - cron: '0 12 * * 1'
  workflow_dispatch:

jobs:
  upgrade:
    name: Run mise upgrade --bump
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8 # v5.0.0

      - name: Install mise
        uses: jdx/mise-action@be3be2260bc02bc3fbf94c5e2fed8b7964baf074 # v3.4.0
        with:
          version: latest

      - name: Bump tool versions
        run: mise upgrade --bump

      - name: Install uv with Python 3.14
        uses: astral-sh/setup-uv@85856786d1ce8acfbcc2f13a5f3fbd6b938f9f41 # v7.1.2
        with:
          enable-cache: true
          python-version: '3.14'

      - name: Autoupdate pre-commit hooks
        run: uvx pre-commit autoupdate
